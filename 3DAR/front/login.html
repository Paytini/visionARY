<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisionARy</title>
    <link rel="stylesheet" href="login.css"> <!-- Enlace al archivo CSS externo -->
</head>
<body>

<div id="contenedor">
    <div id="central">
        <div id="login">
            <img src="LogoARY.png" alt="Logo">
            <div class="titulo">
                ¡Bienvenido!
            </div>
            <form id="loginform">
                <input type="text" name="Correo" placeholder="Correo" required>
                <input type="password" placeholder="Contraseña" name="password" required>
                <button type="submit" title="Ingresar" name="Ingresar">Login</button>
            </form>
            <div class="pie-form">
                <a href="#" >¿Perdiste tu contraseña?</a><br>
                <a href="Registro.html">¿No tienes Cuenta? Regístrate</a>
                <br>
                <a href="paginaPrincipal.html">Regresar</a>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById("loginform").addEventListener("submit", function(event){
    event.preventDefault(); 

    // Obtener los valores de los campos del formulario
    var correo = document.getElementsByName("Correo")[0].value;
    var password = document.getElementsByName("password")[0].value;

    // Construir el objeto con los datos del formulario
    var datos = {
        email: correo,
        password: password
    };
   // alert('Datos de usuario:\n' + JSON.stringify(datos)); // Mensaje de éxito con datos del usuario

    // Enviar los datos al backend utilizando Fetch API
    var baseUrl = window.location.protocol + "//" + window.location.hostname;

        // Enviar los datos al backend utilizando Fetch API
        fetch(baseUrl + ":5080/vision/users/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(datos)
        })
        .then(response => response.json())
        .then(data => {
            // Manejar la respuesta del backend
            console.log(data);
            // Redireccionar al usuario a la página de inicio después del login exitoso
            window.location.href = baseUrl + ":4000/3D3.html";
        })
        .catch(error => {
            console.error("Error en la solicitud:", error);
        });
});

</script>

</body>
</html>